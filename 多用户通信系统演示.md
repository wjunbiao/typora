# 多用户通信系统 

![image-20240525183728499](./assets/image-20240525183728499.png)

![image-20240520160800559](./assets/image-20240520160800559.png)
项目涉及！

![image-20240520160940350](./assets/image-20240520160940350.png)
项目开发流程

## 需求

![image-20240520161130317](./assets/image-20240520161130317.png)

​						界面弱化用控制台演示界面

![image-20240520161209014](./assets/image-20240520161209014.png)

![image-20240520161304871](./assets/image-20240520161304871.png)

![image-20240520161329015](./assets/image-20240520161329015.png)

![image-20240520161405082](./assets/image-20240520161405082.png)

![image-20240520161441528](./assets/image-20240520161441528.png)

## 通讯系统整体分析

![image-20240520161950042](./assets/image-20240520161950042.png)

考虑到：

​	1、不是一个用户要发送消息，是多个用户

​	2、而且发送是的各种各样的消息。

信息种类比较多，所以我们使用对象的方式来处理

如果通讯的话如何 保证一对socket被一直占有呢？
在服务器端一旦获取到一个socket 就启动一个线程。
如果希望能够群发给所有的客户端，就需要得到所有线程里面的socket，所以就需要一个集合来管理
而一个客户端也有可能会多个连接，（比如一个传送文件、一个视频聊天）

![image-20240521213614844](./assets/image-20240521213614844.png)

![image-20240521213714483](./assets/image-20240521213714483.png)

分析：Message 和User 对象是服务端 和 客户端 共享的。因为接收和发送嘛

![image-20240522165843082](./assets/image-20240522165843082.png)
使用工具类

![image-20240522172958352](./assets/image-20240522172958352.png)

![image-20240522175035628](./assets/image-20240522175035628.png)
首先客户端给服务器发送一个user，服务器进行验证，返回一个Message对象，客户端查看是否成功

![image-20240522175350300](./assets/image-20240522175350300.png)
可能后面还会有其他的服务，所以创建一个包

![image-20240522214248117](./assets/image-20240522214248117.png)
如果连接成功就应该启动一个线程，让这个线程维护或持有这个socket ,让线程一直可以和服务端保持通讯

![image-20240523154851157](./assets/image-20240523154851157.png)

![image-20240523185401232](./assets/image-20240523185401232-1716461642481-1.png)

![image-20240523190707479](./assets/image-20240523190707479.png)
对消息类型进行扩展

![image-20240523220513674](./assets/image-20240523220513674.png)

![image-20240524141711224](./assets/image-20240524141711224.png)

![image-20240524212755923](./assets/image-20240524212755923.png)
"学一手"

![image-20240525114954979](./assets/image-20240525114954979.png)